{% extends "base.html" %}
{% block title %}Map{% endblock %}
{% block content %}
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <!-- <script src="{{ url_for('static', filename='css/index.js') }}"></script> -->
    <div id="map"></div>
    data = {{ data }}
    <script type="text/javascript">
    const app = async () => {
        const locations = await data
        function initMap() {
            const myLatLng = { lat: 30.274212, lng: -97.743519 };
            const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 4,
            center: myLatLng,
            });
            for (let x = 0; x < locations.length; x++ ){
                console.log(locations[x])
                new google.maps.Marker({
                    position: locations[x],
                    map,
                    title: "Hello World!",
            });
        }
      }
    };
    app();

    // const locations = data
    // function initMap() {
    //     const myLatLng = { lat: 30.274212, lng: -97.743519 };
    //     const map = new google.maps.Map(document.getElementById("map"), {
    //       zoom: 4,
    //       center: myLatLng,
    //     });
    //     for (let x = 0; x < locations.length; x++ ){
    //         console.log(locations[x])
    //         new google.maps.Marker({
    //             position: locations[x],
    //             map,
    //             title: "Hello World!",
    //         });
    //     }
    //   }
    </script>

    <!-- <script type="text/javascript">
        const locations = [ 
                            { lat: -31.56391, lng: 147.154312 },
                            { lat: -33.718234, lng: 150.363181 },
                            { lat: -33.727111, lng: 150.371124 },
                            { lat: -33.848588, lng: 151.209834 },
                            { lat: -33.851702, lng: 151.216968 },
                            { lat: -34.671264, lng: 150.863657 },
                            { lat: -35.304724, lng: 148.662905 },
                            { lat: -36.817685, lng: 175.699196 },
                            { lat: -36.828611, lng: 175.790222 },
                            { lat: -37.75, lng: 145.116667 },
                            { lat: -37.759859, lng: 145.128708 },
                            { lat: -37.765015, lng: 145.133858 },
                            { lat: -37.770104, lng: 145.143299 },
                            { lat: -37.7737, lng: 145.145187 },
                            { lat: -37.774785, lng: 145.137978 },
                            { lat: -37.819616, lng: 144.968119 },
                            { lat: -38.330766, lng: 144.695692 },
                            { lat: -39.927193, lng: 175.053218 },
                            { lat: -41.330162, lng: 174.865694 },
                            { lat: -42.734358, lng: 147.439506 },
                            { lat: -42.734358, lng: 147.501315 },
                            { lat: -42.735258, lng: 147.438 },
                            { lat: -43.999792, lng: 170.463352 },
                            ];

        function initMap() {
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 3,
                center: { lat: 30.274212, lng: -97.743519 },
            });
            // Create an array of alphabetical characters used to label the markers.
            const labels = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            // Add some markers to the map.
            // Note: The code uses the JavaScript Array.prototype.map() method to
            // create an array of markers based on a given "locations" array.
            // The map() method here has nothing to do with the Google Maps API.
            const markers = locations.map((location, i) => {
                return new google.maps.Marker({
                position: location,
                label: labels[i % labels.length],
                });
            });
            // Add a marker clusterer to manage the markers.
            // new MarkerClusterer(map, markers, {
            //     imagePath:
            //     "https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",
            // }
            
            }
    </script> -->
    
    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRQzAIwUhY_dp-FhBEdtxzNZQ2m0_zvdQ&callback=initMap">
    </script>
{% endblock %}
